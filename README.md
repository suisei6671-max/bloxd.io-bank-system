# bloxd.io-bank-system
オリジナル通貨や経験値を総合して管理するコード

## このプロジェクトでできること
- **オリジナル通貨**の作成
- オリジナル通貨による**アイテムや経験値の取引**
- 300Lvを超えるような経験値の保存
- オリジナル通貨による**ランキング**の利用（リーダーボード）
- オリジナル通貨による**ランク**の利用（チャット）
- オリジナル通貨及び経験値を**ムーンストーンチェスト**を用いて**保存**、読み込み

## ライセンス
- 利用者は絶対にワールドコード上部のライセンスを消さないでください
- それ以外の編集及び利用は自由に行っていただいて構いません

##  導入方法
1. codeの編集権限があるサーバーに参加
2. このコードをコピー、ペースト
3. 必要に応じて編集

## 使用方法
- このワールドコードは仕組みを構築するだけなので、それぞれの操作についてはコードブロックが必要となります
- ここではその書き方についてご紹介します
- `globalThis.bank`には次のようなメゾットがあります

### changeCoins
- プレイヤーのオリジナル通貨量を変化させます
- 引数　　：`val`　=変化量（負の値を入れることで減少させることも可能です）
- 返り値　：現在のプレイヤーのオリジナル通貨量
- コード例：`globalThis.bank[myId].changeCoins(10)`
- 備考　　：クリッカーに使用することができます。他関数での増減にも役立ちます

### display
- プレイヤーのオリジナル通貨にとランク情報を公開します
- 現在、リーダーボードとRightInfoTextに公開するようにしています
- 利用者はそれぞれのサーバーに応じてこの表示を編集することが推奨されます
- 引数　　：なし
- 返り値　：なし
- コード例：`globalThis.bank[myId].display()`
- 備考　　：ワールドコードにより、オリジナル通貨が更新されると表示も更新されるようにはしていますが
- 　　　　　interruptedなどのエラーが重なると実際のオリジナル通貨量と表示されている通貨量にズレが生じる可能性があります

### getRank
- プレイヤーのランクを`globalThis.ranks`から取得します
- 利用者はそれぞれのサーバーに応じてこのランクを編集することが推奨されます
- 引数　　：なし
- 返り値　：下記はサンプルです
- `{"require":3800,"rank":[{"str":"Legend V","style":{"color":"#4B0082"}}],"bgColor":"#D8D8FF","chatTextColor":"white","chatNameColor":"#8844FF"}`
- コード例：`globalThis.bank[myId].getRank()`
- 備考　　：必要ない場合は対応部とともに削除をお願いします

### log
- プレイヤーのオリジナル通貨量を取得します
- 引数　　：`onlyValue` =値のみか（真偽値）
- 返り値①："Your Coin: 3940"（引数がfalseのときのサンプル）
- 返り値②：3940（引数がtrueのときのサンプル）
- コード例：`globalThis.bank[myId].log(false)`
- 備考　　：表示結果を編集したい場合はワールドコードではなくコードブロックを編集することを推奨します

### buy
- オリジナル通貨でアイテムを購入します
- 引数①　：`name` =アイテム名
- 引数②　：`amt` =アイテム量
- 引数③　：`attributes` =アイテム属性（エンチャントなど）
- 引数④　：`cost` =オリジナル通貨量
- 　　　　　"auto"で`globalThis.costList`から取得が可能
- 引数⑤　：`slot` =必要スロット量（任意）
- 返り値①："Can't Buy" =引数④が"auto"なのに`globalThis.costList`から価格が取得できなかった
- 返り値②："No Space" =インベントリに十分な空きスペースがなかった
- 返り値③："No Money" =プレイヤーのオリジナル通貨量が足りていなかった
- コード例：`globalThis.bank[myId].buy("Diamond",1000,{customDisplayName:"Treasure"},"auto",2)`

### sell
- アイテムを売り、オリジナル通貨に変換します
- 引数①　：`name` =アイテム名
- 　　　　　"held"で持っているアイテム
- 引数②　：`amt` =アイテム量
- 　　　　　"auto"で引数①が"held"のみ、右手に持っているものが空になるまで売却
- 　　　　　"all"で指定アイテムを全て売却
- 引数③　：`price` =売値
- 　　　　　"auto"で`globalThis.costList`から取得が可能
- 返り値①："Can't Sell" =引数③が"auto"なのに`globalThis.costList`から価格が取得できなかった
- 返り値②："No Item" =引数①が"held"なのに右手に何もアイテムが持たれていなかった
- 返り値③："Not Enough" =持っているアイテムの量が必要量より少なかった
- 備考　　：引数①で"held"を使用すると引数②では"all"を使用できません

### buyAura
- オリジナル通貨で経験値を購入します
- 引数①　：`aura` =買う経験値の量（百分率、つまり1Lvの20%なら20です）
- 　　　　　"~Lv"の形でレベルを指定することも可能
- 引数②　：`cost` =価格
- 返り値①："No Money" =オリジナル通貨量が足りなかった
- 返り値②："Not Aura Level" =経験値量が正しくない
- 備考　　：少し引数が複雑なので"Not Aura Level"で確認できるようにしています

### sellAura
- 経験値を売り、オリジナル通貨に変換します
- 引数①　：`aura` =売る経験値の量（百分率、つまり1Lvの20%なら20です）
- 　　　　　"~Lv"の形でレベルを指定することも可能
- 引数②　：`cost` =売値
- 　　　　　"all"で全売却も可能
- 返り値　："No Aura" =経験値量が足りなかった

### save
- プレイヤーの現在のオリジナル通貨と経験値の情報をムーンストーンチェストに保存します
- 引数　　：なし
- 返り値　：なし
- コード例：`globalThis.bank[myId].getAura()`
- 備考　　：プレイヤーの退出によるデータの損失を防ぐための関数であり、コードブロックでの使用は想定されていません

### getAura
- プレイヤーの現在の経験値情報を取得します
- 引数　　：なし
- 返り値　：なし（class内部の値が更新されます）
- コード例：`globalThis.bank[myId].getAura()`
- 備考　　：classでセーブ前に経験値情報を取得するための関数であり、コードブロックでの使用は想定されていません

### setAura
- プレイヤーの現在の経験値情報を更新します
- 引数　　：なし
- 返り値　：なし（経験値が自動的に変更されます）
- コード例：`globalThis.bank[myId].setAura()`
- 備考　　：classでロード時に経験値を付与するための関数であり、コードブロックでの使用は想定されていません
